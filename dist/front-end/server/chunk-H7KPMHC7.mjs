import './polyfills.server.mjs';
import{a as c,b as T,m as V,n as O}from"./chunk-SFSLUMU7.mjs";import{a as F}from"./chunk-5M7SFGPF.mjs";import"./chunk-L3LKMAJ5.mjs";import"./chunk-DL2HDLCX.mjs";import"./chunk-PZUJBLPM.mjs";import"./chunk-BI4PDNBI.mjs";import"./chunk-JJJL62AU.mjs";import"./chunk-ZGHL4WF5.mjs";import"./chunk-5LTXXU3Y.mjs";import"./chunk-KLCAW5LL.mjs";import"./chunk-67HAECRY.mjs";import{d as A}from"./chunk-APY6NCEA.mjs";import"./chunk-NP6UCXIG.mjs";import{$a as o,$b as r,Eb as n,Fb as i,Gb as _,Kb as v,Nb as S,Pb as f,Vb as x,Wb as w,Xb as E,ab as u,ac as m,ad as M,ed as R,ga as b,gc as C,hc as I,qa as p,qb as h,ra as g,vb as y}from"./chunk-JFMF6S6U.mjs";import"./chunk-5XUXGTUW.mjs";var D=()=>[5,10,20];function k(s,e){if(s&1){let t=v();n(0,"tr")(1,"td"),r(2),i(),n(3,"td"),r(4),i(),n(5,"td"),r(6),i(),n(7,"td"),r(8),i(),n(9,"td")(10,"button",8),S("click",function(){let a=p(t).$implicit,d=f();return g(d.edit(a.id))}),r(11," Edit "),i(),n(12,"button",9),S("click",function(){let a=p(t).$implicit,d=f();return g(d.deleteStory(a.id))}),r(13," Delete "),i()()()}if(s&2){let t=e.$implicit;o(2),m(t.title),o(2),m(t.category),o(2),m(t.status),o(2),m(t.content_type)}}var P=class s{constructor(e,t){this.router=e;this.storyService=t}stories=[];displayedColumns=["title","category","publication_status","symbol","Actions"];dataSource=new O(this.stories);paginator;ngOnInit(){this.storyService.getAllStories().subscribe({next:e=>{console.log("stories",e),this.stories=e},error:e=>{console.error("Error retrieving contacts:",e)}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator?this.paginator:null}edit(e=0){console.log("Editing category with ID:",e),this.router.navigate([`category/update/${e}`])}deleteStory(e=0){confirm("Are you sure you want to delete this story?")&&this.storyService.deleteStory(e).subscribe({next:()=>{alert("Story deleted successfully!"),this.stories=this.stories.filter(t=>t.id!==e)},error:t=>{console.log(t),alert("Failed to delete story. Please try again.")}})}static \u0275fac=function(t){return new(t||s)(u(A),u(F))};static \u0275cmp=b({type:s,selectors:[["app-start-reading"]],viewQuery:function(t,l){if(t&1&&x(c,5),t&2){let a;w(a=E())&&(l.paginator=a.first)}},standalone:!0,features:[C],decls:21,vars:3,consts:[[1,"container"],[1,"title-part"],[1,"title"],[1,"mat-elevation-z8"],[1,"table","text-center"],["scope","col"],[4,"ngFor","ngForOf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],[1,"btn","bg-warning","mx-3",3,"click"],[1,"btn","bg-danger",3,"click"]],template:function(t,l){t&1&&(n(0,"div",0)(1,"div",1)(2,"h5",2),r(3,"Stories"),i()(),n(4,"div",3)(5,"table",4)(6,"thead")(7,"tr")(8,"th",5),r(9,"Title"),i(),n(10,"th",5),r(11,"Category"),i(),n(12,"th",5),r(13,"Status"),i(),n(14,"th",5),r(15,"Content type"),i(),n(16,"th",5),r(17,"Action"),i()()(),n(18,"tbody"),h(19,k,14,4,"tr",6),i()(),_(20,"mat-paginator",7),i()()),t&2&&(o(19),y("ngForOf",l.stories),o(),y("pageSizeOptions",I(2,D)))},dependencies:[R,M,T,c,V]})};export{P as StartReadingComponent};
